# TikTok Hackathon: Optimize Advertisement Moderation

Welcome to our project for the TikTok Hackathon! Our aim is to optimize advertisement moderation with the use of a stochastic optimization model, with specific focus on dynamically scoring and prioritizing social media advertisements for review, and ensuring these reviews are matched with the best-fitting moderator.

## Background

Digital platforms like TikTok rely heavily on advertisement reviews to ensure safe and appropriate content delivery. The aim of our project is to:

- Prioritize ad review processes based on the value and riskiness of the advertisements.
- Assign the most suitable moderator for a particular ad review, considering factors such as language fit and industry expertise.

## Project Structure

### 1. `data_builders` Package:

**Components**:

- `AdvertisementProducer`: Reads and synthesizes advertisements from raw data.
- `ModeratorProducer`: Reads and generates synthetic moderator data.
- `AdvertisementBuilder` and `ModeratorBuilder`: These classes generate advertisement and moderator streams respectively, which are structured as 2D arrays where the first dimension represents time units, and the second dimension represents ads or moderators.

### 2. `managers` Package:

**Components**:

- `AdvertisementManager`: Manages advertisement data for simulations.
- `ModeratorManager`: Manages moderator data for simulations.

Both of these managers work as the primary drivers for the simulation, interacting with the `algoObject` to produce results like utilization rate and pairing loss.

### 3. `algorithms.estimators` Package:

**Overview**:

The `algorithms.estimators` package is designed to provide a set of tools to evaluate various parameters like revenue, risk, duration, and accuracy for a given ad and moderator. These parameters play a crucial role in determining the profit and value of ads. This package ensures the ads are evaluated in a holistic manner to maximize the potential profit while minimizing risks.

**Components**:

- `RevenueEstimator`: Estimate the revenue of ads based on past average from the same advertiser.


- `RiskEstimator`: It gives a risk score to an ad depending on the number of times an advertiser has been punished.


- `RevenueRiskBasedValueEstimator`: Determines the estimated value of an ad by considering both the revenue and risk associated with it.

- `ModeratorUnitTimeValueEstimator`: Calculates the value generated by a moderator over a unit of time for a given ad. This is crucial to assess the performance and efficiency of moderators.


- `DurationEstimator`: Determines the estimated duration a moderator would take to handle an ad based on their past performance and ad's baseline screening time.


- `AccuracyEstimator`: Estimates the accuracy level of a moderator while handling an ad.

### `algorithms.allocators` Package:

This package consists of various allocator classes, each of which has its own approach to assign ads to moderators. The core aim of these allocator classes is to maximize the efficiency and effectiveness of ad allocation while minimizing inaccuracies and losses.

**Components**:

1. **`RandomAllocator`**: 
    - **Purpose**: This class randomly allocates ads to moderators without considering any optimization.
    - **Methods**:
        - `allocate(ads, mods)`: Allocates ads to moderators. It tries to match ads and moderators based on the delivery country. If no suitable moderator is found, the ad is rejected.
        - `getInaccuracyLoss()`: Returns the total inaccuracy loss accumulated during allocation.

2. **`ModelBasedGreedyAllocator`**: 
    - **Purpose**: Allocates ads to moderators based on a greedy approach while considering future tasks for each moderator.
    - **Methods**:
        - `allocate(ads, mods)`: Allocates ads based on their value to the most suitable moderator. The allocation considers the ad's value, the moderator's current tasks, and future tasks.
        - `getInaccuracyLoss()`: Returns the total inaccuracy loss accumulated during allocation.

3. **`GreedyIdleOnlyAllocator`**:
    - **Purpose**: This allocator uses a greedy approach but only considers currently idle moderators.
    - **Methods**:
        - `allocate(ads, mods)`: Allocates the most valuable ads to the most suitable idle moderator based on the value estimation.
        - `getInaccuracyLoss()`: Returns the total inaccuracy loss accumulated during allocation.

4. **`GreedyAllocator`**:
    - **Purpose**: A greedy algorithm that allocates ads to moderators, always aiming to assign the most valuable ad to the most suitable moderator.
    - **Methods**:
        - `allocate(ads, mods)`: Like the `ModelBasedGreedyAllocator`, it assigns the most valuable ad to the most suitable moderator. However, it doesn't consider future tasks and keeps trying until a successful assignment or all options are exhausted.
        - `getInaccuracyLoss()`: Returns the total inaccuracy loss accumulated during allocation.

## How to Run

Please refer to `test.py` on how to run the simulation with our algorithm.

## Future Scope

Our next steps include:

- Deploying more advanced ads allocation algorithm.
- Provide quick start code or shell script.
- Data visualization for the end result.

## Team

- *Wang Junwu*: member of technical team
- *Wang Yiwen*: member of technical team
- *Wang Ziwen*: member of technical team
- *Xu Shuyao*: member of technical team
- *Xie Zebang*: member of technical team

Feel free to explore our repository and share your feedback. Let's make the digital advertising space a safer and more efficient platform for all users!